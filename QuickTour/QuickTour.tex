% $Author$
% $Date$
% $Revision$
%=================================================================
\ifx\wholebook\relax\else
% --------------------------------------------
% Lulu:
	\documentclass[a4paper,10pt,twoside]{book}
	\usepackage[
		papersize={6.13in,9.21in},
		hmargin={.815in,.815in},
		vmargin={.98in,.98in},
		ignoreheadfoot
	]{geometry}
	\input{../common.tex}
	\pagestyle{headings}
	\setboolean{lulu}{true}
% --------------------------------------------
% A4:
%	\documentclass[a4paper,11pt,twoside]{book}
%	\input{../common.tex}
%	\usepackage{a4wide}
% --------------------------------------------
    \graphicspath{{figures/} {../figures/}}
	\begin{document}
	\renewcommand{\nnbb}[2]{} % Disable editorial comments
\fi
%=================================================================
\newcommand{\clover}{%
	\raisebox{-0.8ex}[0pt][0pt]{%
		\includegraphics[width=1em]{cloverleafKey}}}
%=================================================================
\chapter{A quick tour of \sq}
\label{cha:quick}

In this chapter, we will give you a high-level tour of \sq to help you get comfortable with the environment.
There will be plenty of opportunities to try things out, so it would be a good idea if you have a computer handy when you read this chapter.

We will use this icon: \dothisicon{} to mark places in the text where you should try something out in \sq.
In particular, you will fire up \sq, learn about the different ways of interacting with the system, and discover some of the basic tools.
You will also learn how to define a new method, create an object, and send it messages.

%=================================================================
\section{Getting started}

\sq is available as a free \ind{download} from \url{www.squeak.org}.
Your download will be an archive file that contents vary from platform to platform.
However, there are two important components common to all versions (see \figref{download}).

\begin{figure}[hbt]
\centerline{
	\ifluluelse{
		\includegraphics[width=0.25\textwidth]{DownloadedVM}
		\hspace{.5cm}
		\includegraphics[width=0.25\textwidth]{DownloadedImageFile}
		\hspace{.5cm}
		\includegraphics[width=0.25\textwidth]{DownloadedChangesFile}
	}{
		\includegraphics[width=0.15\textwidth]{DownloadedVM}
		\hspace{.5cm}
		\includegraphics[width=0.15\textwidth]{DownloadedImageFile}
		\hspace{.5cm}
		\includegraphics[width=0.15\textwidth]{DownloadedChangesFile}
	}
}
\caption{The \sq download files (in this example, for 64-bit Windows).\label{fig:download}}
\end{figure}

\begin{enumerate}

  \item The \emphind{virtual machine} (VM) is the only part of the system that is different for each operating system and processor.  Pre-compiled virtual machines are available for all the major computing environments.
  In \figref{download} we see the VM for the Windows is called \textit{\sq.exe}.

  \item The current \emph{system \ind{image}} is a snapshot of a running \sq system, frozen in time.
  It consists of two files: an \emph{.}\emphind{image} file, which contains the state of all of the objects in the system (including classes and methods, since they are objects too), and a \emph{.}\emphind{changes} file, which contains a log of all of the changes to the source code of the system.
In \figref{download}, we see that we have grabbed the \textit{{\sq}5.3-19435} image and changes files.
Actually, we will use a slightly different image in this book.
\end{enumerate}

\dothis{Download and install \sq on your computer.
We recommend that you use the standard image provided on the \sq web page.}
\index{download}
\label{sec:sbeImage}

Most of the introductory material in this book will work with any version, so if you already have one installed, you may as well continue to use it.
However, if you notice differences between the appearance or behavior of your system and what is described here, do not be surprised.

As you work in \sq, the \emphind{image} and \emphind{changes} files are modified, so you need to make sure that they are writable.
Always keep these two files together.
Never edit them directly with a text editor, as \sq uses them to store the objects you work with and to log the changes you make to the source code.
It is a good idea to keep a backup copy of the downloaded image and changes files so you can always start from a fresh image and reload your code.

The \emphind{sources} file and the \emphind{VM} can be read-only\,---\,they can be shared between different users.
All of these files can be placed in the same directory, but it is also possible to put the virtual machine and sources file in a separate directory where everyone has access to them.
Do whatever works best for your style of working and your operating system.

\sd{it would be really nice to have a setup and startup section on PC, Mac and Linux}
\ab{I agree entirely; the reason that this is not here is because I could do only the Mac section.  Damien can probably do Windoze.  Perhaps we can ask on the list for a Linux volunteer?}

%-----------------------------------------------------------------
\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/startup.png' frame: #fullScreen building: [:helper |
	| balloon |
	helper world
		color: (Color gray: 15 / 16); "Think green & save ink"
		extent: 800 px @ 450 px.
	balloon := (Form fromFileNamed: (helper resourceDirectory
		/ 'branding' / 'balloon.png') fullName)
			magnifyBy: RealEstateAgent scaleFactor.
	ReleaseBuilder openWelcomeWorkspacesWith: balloon.
	helper foregroundWindow
		height: helper world height * 0.75;
		center: helper world center.
	PreferenceWizardMorph open.
	self flag: #sq60 "ct: After Objectland has been merged into Trunk, simplify this call and don't ask PreferenceWizardMorph".
]
\end{ExecuteSmalltalkScript}
\begin{figure}[htb]
% \centerline {\includegraphics[width=0.6\textwidth]{download}}
\centerline {\includegraphics[width=\textwidth]{startup}}
\caption{A fresh \sq image.\label{fig:startup}}
\end{figure}

\index{launching Squeak}
\paragraph{Launching.} To start \sq, do whatever your operating system expects: drag the \emph{.}\emphind{image} file onto the icon of the virtual machine, or double-click the \emph{.image} file, or double-click the virtual machine icon, or at the command line type the name of the virtual machine followed by the path to the \emph{.image} file.
(When you have multiple VMs installed on your machine, the operating system may not automatically pick the right one; in this case, it is safer to drag and drop the image onto the virtual machine, or to use the command line.)

Once \sq is running, you should see a single large window, possibly containing some open workspace windows (see \figref{startup}).
You will also notice that there is a small menu bar at the top.
Beyond this one global menu, \sq makes heavy use of context-dependent pop-up menus.

\dothis{Start \sq.
You can dismiss any open workspaces by clicking on the {\sf X} in the top left corner of the workspace window.
You can collapse the windows (so that they can be expanded again later) by clicking on the \raisebox{-0.2ex}{{\Large $-$}} in the top-right corner.}

%-----------------------------------------------------------------
\paragraph{First interaction.}

A good place to get started is the \ind{world menu} shown in \figref{threeButtons:red}.

\dothis{Click with the mouse on the background of the main window to show the world menu, then choose \menu{open \ldots~\go{} workspace} to create a new workspace.}
\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/worldMenu.png' frame: #morphs building: [:helper |
	helper click: helper world at: helper world topCenter + (0 px @ 30 px) buttons: #(left).
	helper hand releaseMouseFocus.
	helper mouseEnter: (helper menuItemMorphLabeled: 'open...' in: helper world).
	helper closeBalloons.
]
\end{ExecuteSmalltalkScript}

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/yellowButtonMenuOnWorkspace.png' frame: #morphs building: [:helper |
	| workspace menu |
	workspace := ToolBuilder open: Workspace new.
	helper type: 'Time now ' into: workspace.

	helper click: workspace at: workspace topCenter + (0 px @ 30 px) buttons: #(right).
	helper hand releaseMouseFocus.
	helper mouseEnter: (helper menuItemMorphLabeled: 'print it (p)' in: helper world).
	helper closeBalloons.
	menu := helper foregroundMorph.
	menu position: menu position + (30 px @ 0 px).
]
\end{ExecuteSmalltalkScript}

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/morphicHaloOnWorkspace.png' frame: #morphs building: [:helper | | workspace |
	workspace := ToolBuilder open: Workspace new.
	helper type: 'Time now' into: workspace.
	helper centerAllMorphs.
	helper foregroundWindow lookFocused.
	workspace addHalo.
]
\end{ExecuteSmalltalkScript}

\begin{figure}[tbh]
	\centering
	\subfigure[The world menu]{\label{fig:threeButtons:red}%
		\includegraphics[width=0.2\linewidth]{worldMenu}}\hfill
	\subfigure[The contextual menu]{\label{fig:threeButtons:yellow}%
		\includegraphics[width=0.6\linewidth]{yellowButtonMenuOnWorkspace}}\hfill
	\begin{center}
	\vspace{-4.75cm}
		\subfigure[The morphic halo]{\label{fig:threeButtons:blue}%
		%\ct{HACKED AND HARDCODED LAYOUT: A better approach might use \usepackage[absolute]{textpos}.}
		\includegraphics[width=0.4\linewidth]{morphicHaloOnWorkspace}
		\hspace{0.5cm}
		}% these braces needed (else no whitespace at end of line)
    \vspace{1.25cm}
	\end{center}
	\caption{The world menu (brought up by the red mouse button), a contextual menu (yellow mouse button), and a morphic halo (blue mouse button).\label{fig:threeButtons}}
\end{figure}
\index{red button}
\index{yellow button}
\index{blue button}
\seeindex{morphic halo}{Morphic}

\sq was originally designed for a computer with a \ind{three button mouse}.
If your mouse has fewer than three buttons, you will have to press extra keys while clicking the mouse to simulate the extra buttons.

\sq avoids terms like ``left mouse click'' because different computers, mice, keyboards, and personal configurations mean that different users will need to press different physical buttons to achieve the same effect.
Instead, the mouse buttons are labeled with colors.
The mouse button that you pressed to get the ``World'' menu is called the \emphind{red button}; it is most often used for selecting items in lists, selecting text, and selecting menu items.
When you start using \sq, it can be surprisingly helpful to actually label your mouse, as shown in \figref{coloredMouse}.%
\footnote{We will avoid the term ``red-click'' and use ``click'' instead since this is the default.}

\begin{wrapfigure}[19]{R}{0.25\linewidth}
% The parameters are the number of narrow lines to the right of the figure [19],
% the placement {r} for right, and the width of the figure. Capital R will allow some float.
% Inside the wrapfig environment, linewidth is special --- the width of the figure.
\includegraphics[width=0.95\linewidth]{coloredMouse}
\caption{The author's mouse.
	Clicking the scroll wheel activates the blue button.}
\label{fig:coloredMouse}
\end{wrapfigure}

The \emphind{yellow button} is the next most used button; it is used to bring up a contextual menu, that is, a menu that offers different sets of actions depending on where the mouse is pointing; see \figref{threeButtons:yellow}.

\dothis{Type \ct{Time now} in the workspace.
Now click the yellow button in the workspace.
%Select \menu{print it}.}
Select \emph{print it}.%
% ct: HACK: \emph seems to break \soul :/
}

Finally, there is the \emphind{blue button} to activate the ``morphic \subind{Morphic}{halo}'', an array of handles that are used to perform operations on the on-screen objects themselves, such as rotating or resizing; see \figref{threeButtons:blue}.
If you let the mouse linger over a handle, a help balloon will explain its function.

\dothis{Click the blue button on the workspace.
Grab the \rotateHandle{} handle near the bottom left corner and drag it to rotate the workspace.}

We recommend that right-handed people configure their mouse to put the \ind{red button} on the left side of their mouse, the \ind{yellow button} on the right, and use a clickable scroll wheel, if one is available, for the blue button.
If you don't have a clickable scroll wheel, then you can get the Morphic halo by holding down the \ct{alt} or \ct{option} key while clicking the \ind{red button}.
If you use a Mac without a second mouse button, you can simulate one by holding down the \clover{} key while clicking the mouse.

You can configure your mouse to work the way you want by using the preferences of your operating system and mouse driver.
\sq has some preferences for customizing the mouse and the meta keys on your keyboard.
You can find the \ind{preference browser} in the \menu{open} item of the \menu{World} menu.
In the preference browser, the \menu{general} category contains an option \menu{Swap mouse buttons} that switches the yellow and blue functions (see \figref{prefBrowser}).
The \menu{keyboard} category has options to duplicate the various command keys.

\dothis{Open the preference browser and find the \menu{Swap mouse buttons} option using the search box.}

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/PreferenceBrowser.png' frame: #morphs building: [:helper |
	| browser searchBox |
	PreferenceBrowser open.
	browser := helper foregroundWindow.
	browser extent: 600 px @ 275 px.
	searchBox := helper morphWithBalloonText: 'Search preference*' in: browser.
	helper type: 'swap' into: searchBox.
	searchBox model searchSelected.
	(helper preferenceButtonMorphLabeled: 'Swap mouse buttons' in: browser) highlightOn.
]
\end{ExecuteSmalltalkScript}

\begin{figure}[htb]
\ifluluelse
	{\centerline {\includegraphics[width=\textwidth]{PreferenceBrowser}}}
	{\centerline {\includegraphics[scale=0.7]{PreferenceBrowser}}}
\caption{The Preference Browser.\label{fig:prefBrowser}}
\end{figure}

%=================================================================
\section{The world menu}
\index{world menu}

\dothis{Click again on the \sq background.}
You will see the \menu{World} menu again.
Most \sq menus are not modal; you can leave them on the screen for as long as you wish by clicking the thumbtack icon in the top-right corner.
Do this.
Also, notice that menus appear when you click the mouse, but do not disappear when you release it; they stay visible until you make a selection, or until you click outside of the menu.
You can even move the menu around by grabbing its title bar.

The world menu provides you a simple means to access many of the tools that \sq offers.

\dothis{Have a closer look at the \menu{world~\go{} open \ldots} menu.}
You will see a list of several of the core tools in \sq, including the system browser (one of many available class browsers) and the workspace.
We will encounter most of them in the coming chapters.

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/OpenMenu.png' frame: #morphs building: [:helper |
  helper click: helper world.
  (helper menuItemMorphLabeled: 'open...' in: helper world) invokeWithEvent: nil.
  helper closeBalloons.
  helper hand releaseMouseFocus.
]
\end{ExecuteSmalltalkScript}

\begin{figure}[htb]
\ifluluelse
	%{\centerline {\includegraphics[width=0.3\textwidth]{OpenMenu}}}
	{\centerline {\includegraphics[width=0.3\textwidth]{OpenMenu}}}
	{\centerline {\includegraphics[width=0.4\textwidth]{OpenMenu}}}
\caption{The \menu{open \ldots} dialogue of the world menu.\label{fig:openmenu}}
\end{figure}

%=================================================================
\section{Saving, quitting, and restarting a \sq session}

\dothis{Bring up the world menu.
Now select \menu{new morph \ldots} and navigate to \menu{from alphabetical list~\go{} A-C~\go{} BouncingAtomsMorph}.
You now have a morph full of bouncing atoms ``in hand''.
Put the atoms morph down (by clicking) somewhere.}
\index{Morphic}

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/BouncingAtoms.png' frame: #morphs building: [:helper |
  BouncingAtomsMorph new openInWorld
]
\end{ExecuteSmalltalkScript}

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/saveAs.png' frame: #morphs building: [:helper |
	helper
		runModal: [Smalltalk saveAs]
		then: [
			helper closeBalloons.
			helper scaleWindow: helper dialogWindow paneMorph extent: 400 px @ 290 px.
			helper type: 'SBE' into: (helper morphByExternalName: 'inputText' in: helper world) firstSubmorph firstSubmorph].
]
\end{ExecuteSmalltalkScript}

\begin{figure}[htb]
\begin{minipage}[b]{.48\textwidth}
\ifluluelse
	{\centerline {\includegraphics[width=0.9\textwidth]{BouncingAtoms}}}
	{\centerline {\includegraphics[scale=0.7]{BouncingAtoms}}}
	\caption{An instance of \lct{BouncingAtomsMorph}.
	\label{fig:bouncingAtoms}}
\end{minipage}
\hfill
\begin{minipage}[b]{.48\textwidth}
\ifluluelse
	{\centerline{\includegraphics[width=0.9\textwidth]{saveAs}}}
	{\centerline{\includegraphics[width=0.7\textwidth]{saveAs}}}
	\caption{The \menu{save as \ldots} dialogue.
	\label{fig:saveas}}
\end{minipage}
\end{figure}

\dothis{Select \menu{World~\go{} save as \ldots}, and enter the name ``SBE''.
	Now click on the \menu{Accept(s)} button.
	Now select \menu{World~\go{} save and quit}.}

Now if you go to the location where the original image and changes files were, you will find two new files called ``SBE.\ind{image}'' and ``SBE.\ind{changes}'' that represent the working state of the \sq image at the moment before you told \sq to \menu{save and quit}.
If you wish, you can move these two files anywhere that you like on your disk, but if you do so you may (depending on your operating system) need to also move, copy or link to the virtual machine and the \emph{.source} file.

\dothis{Start up \sq from the newly created ``SBE.image'' file.}

Now you should find yourself in precisely the state you were when you quit \sq.
The bouncing atoms morph is there again and the atoms continue to move from where they were when you left it.

When you start \sq for the first time, the \sq \ind{virtual machine} loads the image file that you provide.
This file contains a snapshot of a large number of objects, including a vast amount of pre-existing code and a large number of programming tools (all of which are objects).
As you work with \sq, you will send messages to these objects, you will create new objects, and some of these objects will die and their memory will be reclaimed (\ie garbage-collected).

When you quit \sq, you will normally save a snapshot that contains all of your objects.
If you save normally, you will overwrite your old image file with the new snapshot.
Alternatively, you may save the image under a new name, as we just did.

In addition to the \emph{.image} file, there is also a \emph{.changes} file.
This file contains a log of all the changes to the source code that you have made using the standard tools.
Most of the time you do not need to worry about this file at all.
As we shall see, however, the \emph{.changes} file can be very useful for recovering from errors or replaying lost changes.
More about this later!

The image that you have been working with is a descendant of the original \st-80 image created in the late 1970s.
Some of these objects have been around for decades!

The image can be used as a mechanism for storing and managing software projects you are working on.
However, as we shall see later on, there are also tools for managing code and sharing software developed by teams.
For now, we will continue by cleaning up the image before we take a look at the tools \sq provides.

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/Tools.png' frame: #morphs building: [:helper |
	| dockingBar appsItem |
	dockingBar := TheWorldMainDockingBar new createDockingBar.
	helper world addMorph: dockingBar.
	dockingBar ownerChanged.
	appsItem := helper menuItemMorphLabeled: 'Tools' in: dockingBar.
	helper click: appsItem
]
\end{ExecuteSmalltalkScript}
\begin{figure}[htb]
\ifluluelse
	{\centerline {\includegraphics[width=\textwidth]{Tools}}}
	{\centerline {\includegraphics[width=0.8\textwidth]{Tools}}}
\caption{The \sq \menu{Tools} menu.\label{fig:tools}}
\end{figure}

%=================================================================
\section{Workspaces and transcripts}
\label{sec:transcript}

\dothis{Close all open windows.
	In the menu bar at the top select \menu{Tools}.}
You will see entries for some of the key tools in \sq (\figref{tools}).
Open a \ind{transcript} and a \ind{workspace}.

\dothis{Position and resize the transcript and workspace windows so that the workspace just overlaps the transcript.}
You can resize windows either by dragging one of the corners, or by blue-clicking the window to bring up the morphic handles, and dragging the yellow, bottom right handle.

At any time only one window is active; it is in front and has its label highlighted (e.g. the workspace window is active in \figref{doit}).

The transcript is an object that is often used for logging system messages.
It is a kind of ``system console''.
Note that the transcript is terribly slow, so if you keep it open and write to it certain operations can become 10 times slower.
(You can speed up it by disabling the preference ``Force transcript updates to screen'' in the Preference Browser.)
In addition, the transcript is not thread-safe so you may experience strange problems if multiple objects write concurrently to the transcript.

Workspaces are useful for typing snippets of \st code that you would like to experiment with.
You can also use workspaces simply for typing arbitrary text that you would like to remember, such as to-do lists or instructions for anyone who will use your image.
Workspaces are often used to hold documentation about a captured image, as is the case with the standard image that we downloaded earlier (see \figref{startup}).

\dothis{Type the following text into the workspace:}
\begin{code}{}
Transcript showln: 'hello world'.
\end{code}

Try double-clicking in the workspace at various points in the text you have just typed.
Notice how an entire word, entire string, or the whole text is selected, depending on where you click.

\dothis{Select the text you have typed and yellow-click.
Select \menu{do it (d)}.}
Notice how the text ``hello world'' appears in the transcript window
(\figref{doit}).
Do it again.
(The \menu{(d)} in the menu item \menu{do it (d)} tells you that the keyboard shortcut to \emph{do it} is \short{d}.
More on this in the next section!)

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/Doit.png' frame: [:morphsRect | morphsRect withBottom: morphsRect bottom - 150 px] building: [:helper |
  | workspace |
  ToolBuilder open: Transcript.
  Transcript showln: 'hello world'.
  helper foregroundWindow bounds: (0 px @ 120 px extent: 450 px @ 230 px).

  workspace := ToolBuilder open: Workspace new.
  workspace position: 200 px @ 100 px.

  helper type: 'Transcript showln: ''hello world''.' into: workspace.
  helper keyStroke: workspace key: $a modifiers: #(cmd).

  helper click: workspace at: workspace topCenter + (10 px @ 30 px) buttons: #(right).
  helper hand releaseMouseFocus.
  helper mouseEnter: (helper menuItemMorphLabeled: 'do it (d)' in: helper world).
  helper closeBalloons.
]
\end{ExecuteSmalltalkScript}
\begin{figure}[htb]
\ifluluelse
	{\centerline {\includegraphics[width=\textwidth]{Doit}}}
	{\centerline {\includegraphics[width=\textwidth]{Doit}}}
\caption{``Doing'' an expression\label{fig:doit}.}
\end{figure}

You have just evaluated your first \st expression!
You just sent the message \ct{show: 'hello world'} to the \ct{Transcript} object, followed by the message \ct{cr} (carriage return).
The \ct{Transcript} then decided what to do with this message, that is, it looked up its \emph{methods} for handling \ct{show:} and \ct{cr} messages and reacted appropriately.

If you talk to Smalltalkers for a while, you will quickly notice that they generally do not use expressions like ``call an operation'' or ``invoke a method'', but instead they will say ``send a message''.
This reflects the idea that objects are responsible for their own actions.
You never \emph{tell} an object what to do\,---\,instead, you politely \emph{ask} it to do something by sending it a message.
The object, not you, selects the appropriate method for responding to your message (more about this in \charef{understanding}).


%=================================================================
\section{Keyboard shortcuts}

If you want  to evaluate an expression, you do not always have to bring up the yellow-button menu.
Instead, you can use \ind{keyboard shortcuts}.
These are the parenthesized expressions in the menu.
Depending on your platform, you may have to press one of the modifier keys (control, alt, command, or meta).
(We will indicate these generically as \short{\emph{key}}.)

\dothis{Evaluate the expression in the workspace again, but using the keyboard shortcut: \short{d}.}
\index{keyboard shortcut!do it}

In addition to \menu{do it}, you will have noticed \menu{print it}, \menu{inspect it} and \menu{explore it}.
Let's have a quick look at each of these.

\dothis{Type the expression \ct{3 + 4} into the workspace. Now \menu{do it} with the keyboard shortcut.}

Do not be surprised if you saw nothing happen!
What you just did is send the message \ct{+} with argument \ct{4} to the number \ct{3}.
Normally the result \ct{7} will have been computed and returned to you, but since the workspace did not know what to do with this answer, it simply threw the answer away.
If you want to see the result, you should \menu{print it} instead.
\menu{print it} actually compiles the expression, executes it, sends the message \ct{printString} to the result, and displays the resulting string.

\dothis{Select \ct{3 + 4} and \menu{print it} (\short{p}).}
This time we see the result we expect (\figref{printit}).
\index{keyboard shortcut!print it}

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/PrintIt.png' frame: #morphs building: [:helper | | workspace |
  workspace := ToolBuilder open: Workspace new.
  workspace extent: 277 px @ 143 px.

  helper type: '3 + 4' into: workspace.
  helper keyStroke: workspace key: $p modifiers: #(cmd).
]
\end{ExecuteSmalltalkScript}
\begin{figure}[htb]
\centerline {\includegraphics[width=0.65\textwidth]{PrintIt}}
\caption{``Print it'' rather than ``do it''. \label{fig:printit}}
\end{figure}

\needlines{3}
\begin{code}{@TEST}
3 + 4 --> 7
\end{code}
\noindent
We use the notation \ct{-->} as a convention in this book to indicate that a particular \sq expression yields a given result when you \menu{print it}.

\dothis{Delete the highlighted text ``\ct{7}'' (\sq should have selected it for you, so you can just press the delete key).
Select \ct{3 + 4} again and this time \menu{inspect it} (\short{i}).}
\noindent
Now you should see a new window, called an \emphind{inspector}, with the heading \ct{SmallInteger: 7} (\figref{inspectit}).
The inspector is an extremely useful tool that will allow you to browse and interact with any object in the system.
The title tells us that \ct{7} is an instance of the class \clsind{SmallInteger}.
The left panel allows us to browse the instance variables of an object, the values of which are shown in the right panel.
The bottom panel can be used to write expressions to send messages to the object.

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/InspectIt.png' frame: #morphs building: [:helper |
	| workspace |
	workspace := ToolBuilder open: Workspace new.
	workspace bounds: (0 px @ 30 px extent: 277 px @ 143 px).

	helper type: '3 + 4' into: workspace.
	helper keyStroke: workspace key: $i modifiers: #(cmd).
	(helper windowLabeled: 'SmallInteger#*')
		position: 120 px @ 20 px; extent: 300 px @ 185 px.
]
\end{ExecuteSmalltalkScript}
\begin{figure}[htb]
\centerline {\includegraphics[width=0.65\textwidth]{InspectIt}}
\caption{Inspecting an object. \label{fig:inspectit}}
\end{figure}

\dothis{Type \ct{self squared} in the bottom panel of the inspector on \ct{7} and \menu{print it}.}

\needlines{2}
\dothis{Close the inspector.
	Type the expression \ct{Object} in a workspace and this time \menu{explore it} (\short{I}, uppercased i).}
\index{keyboard shortcut!explore it}
\index{explorer}

This time you should see a window labeled \clsind{Object} containing the text
\mbox{$\triangleright$ \ct{root: Object}}.
Click on the triangle to open it up (\figref{exploreit}).

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/ExploreIt.png' frame: #morphs building: [:helper |
  Object explore
]
\end{ExecuteSmalltalkScript}
\begin{figure}[htb]
\centerline {\includegraphics[width=0.55\textwidth]{ExploreIt}}
\caption{Exploring an object. \label{fig:exploreit}}
\end{figure}

The explorer is similar to the inspector, but it offers a tree view of a complex object.
In this case, the object we are looking at is the \ct{Object} class.
We can see directly all the information stored in this class, and we can easily navigate to all its parts, e.g. its superclass which is stored in \ct{superclass}.

%=================================================================
\section{The system browser}

The \ind{system browser} is one of the key tools used for programming.
As we shall see, there are several interesting browsers available for \sq, but this is the basic one you will find in any image.
\seeindex{class browser}{system browser}
\seeindex{browser}{system browser}

\dothis{Open a browser by selecting \menu{World~\go{} Browser}, or by selecting \menu{Tools~\go{} Browser} in the world menu bar.}

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/ClassBrowser2.png' frame: #morphs building: [:helper |
	| class selector window listBalloonHeight codePane |
	class := Object. selector := #printString.
	ToolSet browse: class selector: selector.
	window := helper foregroundWindow.
	helper displayForegroundWindowFocused.

	listBalloonHeight := nil.
	Dictionary new
		at: #systemCategoryList put: 'System categories';
		at: #classList put: 'Classes';
		at: #messageCategoryList put: 'Protocols';
		at: #messageList put: 'Methods';
		keysAndValuesDo: [:name :description |
			| list |
			list := helper morphByExternalName: name in: window.
			(SBEBalloonMorph string: description for: list)
				popUpTaillessAt: (list center x @ (listBalloonHeight ifNil: [listBalloonHeight := list center y]))].
	codePane := helper codePaneOfBrowser: window.
	(SBEBalloonMorph string: 'name of method' for: codePane)
		popUpAt: codePane topLeft + (10 px @ 58 px);
		orientation: #topLeft.
	(SBEBalloonMorph string: 'method comment' for: codePane)
		popUpAt: (codePane bounds pointAtFraction: 0.7 @ 0.2).
	(SBEBalloonMorph
		string: ('code of method\"{1}"' withCRs format: {selector})
		for: codePane)
		popUpAt: (codePane bounds pointAtFraction: 0.38 @ 0.4)
		orientation: #topLeft.
]
\end{ExecuteSmalltalkScript}
\begin{figure}[htb]
\ifluluelse
	{\centerline {\includegraphics[width=\textwidth]{ClassBrowser2}}}
	{\centerline {\includegraphics[scale=0.7]{ClassBrowser2}}}
\caption{The system browser showing the \ct{printString} method of class \ct{Object}.
\label{fig:classBrowser}}
\end{figure}

We can see a system browser in \figref{classBrowser}.
The title bar indicates that we are browsing the class \clsind{Object}.

When the browser first opens, all panes are empty except for the leftmost one.
This first pane lists all known \emph{system categories}, which are groups of related classes.
\index{category!system}

\dothis{Click on the category \scatind{Kernel-Objects}.}
This causes the second pane to show a list of all of the classes in the selected category.

\dothis{Select the class \clsind{Object}.}
Now the remaining two panes will be filled with text.
The third pane displays the \emph{protocols}\index{protocol} of the currently selected class (referred to as \emph{method categories}\index{method category} by the browser).
These are convenient groupings of related methods.
If no \ind{protocol} is selected you should see all methods in the fourth pane.

\dothis{Select the \protind{printing} protocol.}
You may have to scroll down to find it.
Now you will see in the fourth pane only methods related to printing.
\index{category!method}
\index{category!message|see method}

\dothis{Select the \mthind{Object}{printString} method.}
Now we see in the bottom pane the source code of the \ct{printString} method, shared by all objects in the system (except those that override it).

%=================================================================
\section{Finding classes}

There are several ways to find a class in \sq.
The first, as we have just seen above, is to know (or guess) what category it is in, and to navigate to it using the browser.
\index{system browser}
\seeindex{system browser!finding classes}{class, finding}
\index{class!finding}

A second way is to send the \ct{browse} message to the class, asking it to open a browser on itself.
Suppose we want to browse the class \clsind{Boolean}.

\dothis{Type \ct{Boolean browse} into a workspace and \menu{do it}.}
A browser will open on the Boolean class (\figref{browseBoolean}).
There is also a \ind{keyboard shortcut} \short{b} (browse) that you can use in any tool where you find a class name; \index{keyboard shortcut!browse it}, select the name and type \short{b}.

\dothis{Use the keyboard shortcut to browse the class \ct{Boolean}.}

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/Kernel-objects-boolean.png' frame: #morphs building: [:helper |
	ToolSet browseClass:  Boolean
]
\end{ExecuteSmalltalkScript}
\begin{figure}[hbt]
\ifluluelse
	{\centerline {\includegraphics[width=\textwidth]{Kernel-objects-boolean}}}
	{\centerline {\includegraphics[scale=0.7]{Kernel-objects-boolean}}}
\caption{The system browser showing the definition of class Boolean.
\label{fig:browseBoolean}}
\end{figure}

Notice that when the \ct{Boolean} class is selected but no protocol or method is selected, the bottom pane automatically shows the \emph{class definition}
(\figref{browseBoolean}).
This is nothing more than an ordinary \st message that is sent to the parent class, asking it to create a subclass.
Here we see that the class \ct{Object} is being asked to create a subclass named \ct{Boolean} with no instance variables, class variables or ``pool dictionaries'', and to put the class \ct{Boolean} in the \scatind{Kernel-Objects} category.

If you want to see further information on the class, you can click on the \button{?} at the bottom of the class pane.
This opens the \subind{class}{comment} in a dedicated pane.

\ab{I thought that this was supposed to be a \emph{Quick} tour!  And here we are describing a tool that I have used maybe twice in 10 years!   In any case, this description should be deferred to the \textbf{Environment} chapter}
\on{I don't see why.  I use the hierarchy browser a lot!  I think it is really useful to know from the beginning, to help you find your through the hierarchy.}
If you would like to explore \sq's inheritance hierarchy, the \emphind{hierarchy browser} can help you.
This can be useful if you are looking for an unknown subclass or superclass of a known class.
The hierarchy browser is like the system browser, except that the list of classes is arranged as an indented tree mirroring the inheritance hierarchy.

\dothis{Click on \button{hierarchy} in the browser while the class \ct{Boolean} is selected.}
\noindent
This will open a hierarchy browser showing the superclasses and subclasses of \clsind{Boolean}.
% (\figref{booleanhierarchybrowser}).

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/BooleanHierarchyBrowser.png' frame: [:morphsRect | morphsRect] building: [:helper |
	| splitter |
	ToolSet browseHierarchy: Boolean selector: nil.
	splitter := helper foregroundWindow allMorphs detect: [:m |
		(m isKindOf: ProportionalSplitterMorph) and: [m splitsTopAndBottom]].
	splitter repositionBy: 0 @ 60 px.
	helper closeBalloons.
]
\end{ExecuteSmalltalkScript}

Navigate to the immediate superclass and subclasses of \ct{Boolean}.

Often, the fastest way to find a class is to search for it by name.
For example, suppose that you are looking for some unknown class that represents dates and times.

\dothis{Put the mouse in the system category pane of the system browser and type \short{f}, or select \menu{find class \ldots (f)} from the yellow-button menu.
	Type ``time'' in the dialog box.}
\noindent
You will be presented with a list of classes whose names contain ``time'' (see \figref{findit}).
Choose one, say, \ct{Time}, and the browser will show it.
\index{keyboard shortcut!find ...}

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeInto: './figures' recordSeries: [:picture :helper |
	| browser systemCategoryList |
	SystemBrowser defaultOpenBrowser.
	browser := helper foregroundWindow.
	browser position: 0 px @ 0 px.

	systemCategoryList := helper morphByExternalName: #systemCategoryList in: helper foregroundWindow.
	helper
		runModal: [helper keyStroke: systemCategoryList key: $f modifiers: #(cmd)]
		then: [
			helper dialogWindow position: 60 px asPoint.
			picture writeTo: 'FindIt.png'.
			picture writeTo: 'TimeClasses.png' building: [
				helper type: 'time' into: (helper morphByExternalName: 'searchText' in: helper world).
				helper closeBalloons]].
]
\end{ExecuteSmalltalkScript}

\begin{figure}[hbt]
\centerline{
\ifluluelse{
	\includegraphics[width=0.475\textwidth]{FindIt}
	\hspace{0.25cm}
	\includegraphics[width=0.475\textwidth]{TimeClasses}
}{
	\includegraphics[width=0.35\textwidth]{FindIt}
	\hspace{1cm}
	\includegraphics[width=0.35\textwidth]{TimeClasses}
}
}
\caption{Searching for a class by name.
\label{fig:findit}}
\end{figure}

%=================================================================
\section{Finding methods}
\label{sec:quick:methodFinder}

Sometimes you can guess the name of a method, or at least part of the name of a method, more easily than the name of a class.
For example, if you are interested in the current time, you might expect that there would be a method called ``now'', or containing ``now'' as a substring.
But where might it be?
The \emphind{method finder} can help you.
\seeindex{system browser!finding methods}{method, finding}
\index{method!finding}

\dothis{Select \menu{Tools~\go{} Method Finder} in the menu bar at the top or open the world menu and select \menu{open\ldots~\go{} method finder}.
Type ``now'' in the top left pane, and \menu{accept} it (or just press the \textsc{return} key).}
The method finder will display a list of all the method names that contain the substring ``now''.
To scroll to \ct{now} itself, move the cursor to the list and type ``\ct{n}''; this trick works in all scrolling windows.
Select ``now'' and the right-hand pane shows you the three classes that define a method with this name, as shown in \figref{MethodFinder}.  Selecting any one of them will open a browser on it.

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/methodFinder-now.png' frame: #morphs building: [:helper |
	| window inputField hitList |
	window := ToolBuilder open: SelectorBrowser new.
	window extent: 500 px @ 210 px.
	inputField := (window rootMorphsAt: window topLeft + 30 px) first.
	hitList := (window rootMorphsAt: inputField bottomLeft + 30 px) first.
	helper
		type: 'now' into: inputField;
		keyStroke: inputField key: Character enter;
		select: hitList at: 'now' andScrollIntoViewBy: 3.
]
\end{ExecuteSmalltalkScript}

\begin{figure}[hbt]
\centerline {\includegraphics[width=0.8\textwidth]{methodFinder-now}}
\caption{The method finder showing three classes that define a method named \ct{now}.
\label{fig:MethodFinder}}
\end{figure}

At other times you may have a good idea that a method exists, but will have no idea what it might be called.
The method finder can still help!
For example, suppose that you would like to find a method that turns a string into upper case, for example, it would translate \ct{'eureka'} into \ct{'EUREKA'}.

\dothis{Type \ct{'eureka' . 'EUREKA'} into the method finder and press the \textsc{return} key, as shown in \figref{methodFinder-example1}.}
\noindent
The method finder will suggest a method that does what you want.

An asterisk at the beginning of a line in the right pane of the method finder indicates that this method is the one that was actually used to obtain the requested result.
So, the asterisk in front of \ct{String asUppercase} lets us know that the method \mthind{String}{asUppercase} defined on the class \clsind{String} was executed and returned the result we wanted.
The methods that do not have an asterisk are just the other methods that have the same name as the ones that returned the expected result.
So \cmind{Character}{asUppercase} was not executed on our example, because \ct{'eureka'} is not a \clsind{Character} object.

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/MethodFinder-example1.png' frame: #morphs building: [:helper |
	| window inputField hitList |
	window := ToolBuilder open: SelectorBrowser.
	window extent: 500 px @ 210 px.
	inputField := (window rootMorphsAt: window topLeft + 30 px) first.
	hitList := (window rootMorphsAt: inputField bottomLeft + 30 px) first.
	helper
		type: '''eureka''. ''EUREKA''' into: inputField;
		keyStroke: inputField key: $s modifiers: #(cmd).
	helper click: hitList at: hitList topLeft + 10 px buttons: #(left)
]
\end{ExecuteSmalltalkScript}
\begin{figure}[hbt]
\centerline {\includegraphics[width=0.8\textwidth]{MethodFinder-example1}}
\caption{Finding a method by example.
\label{fig:methodFinder-example1}}
\end{figure}

You can also use the method finder for methods with arguments; for example, if you are looking for a method that will find the greatest common factor of two integers, you might try \ct{25. 35. 5} as an example.
You can also give the method finder multiple examples to narrow the search space; the help text in the bottom pane explains more.

There is yet another way to find both, methods, and classes.
In the top right corner of the menu bar at the top you can find a pane saying ``Search or evaluate\ldots''.
This pane provides you a global search; you can activate it from everywhere via \short{0}.
When you try previous searches for the class \ct{Time} or the method \ct{now} you will see that the search directly opens a browser for the class or the methods.

%=================================================================
\section{Defining a new method}

\sq provides many more interesting tools, such as the test runner and the debugger.
In order to illustrate you how these are typically used while programming in \sq, we will show you how you can make use of them while defining a new method.

The advent of \ind{Test Driven Development}\cite{Beck03a} has changed the way that we write code.
The idea behind Test Driven Development, also called TDD or Behavior Driven Development, is that we write a test that defines the desired behavior of our code \emph{before} we write the code itself.
Only then do we write the code that satisfies the test.
\seeindex{Behavior Driven Development}{Test Driven Development}

Suppose that our assignment is to write a method that ``says something loudly and with emphasis''.
What exactly does that mean?
How can we make sure that programmers who may have to maintain our method in the future have an unambiguous description of what it should do?
We can start answering these questions by giving an example:

\begin{quote}
When we send the message \ct{shout} to the string ``Don't panic'' the result should be ``DON'T PANIC!''.
\end{quote}

\noindent
To make this example into something that the system can use, we turn it into a test method:
\index{testing}
\index{SUnit}

\needlines{3}
\numFiletreeMethodInput[stringtesttestshout]%
{A test for a shout method.}%
{ListingSources/SBE-QuickTour.package/StringTest.extension/instance/testShout.st}

How do we create a new method in \sq?
First, we have to decide which class the method should belong to.
In this case, the \ct{shout} method that we are testing will go in class \clsind{String}, so the corresponding test will, by convention, go in a class called \clsind{StringTest}.

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/StringTest-newMethodTemplate.png' frame: #morphs building: [:helper |
	ToolSet browseClass: StringTest category: #'tests - converting'.
	(helper codePaneOfBrowser: helper foregroundWindow) setSelection: (1 to: 0).
]
\end{ExecuteSmalltalkScript}


\begin{figure}[hbt]
\ifluluelse
	{\centerline {\includegraphics[width=\textwidth]{StringTest-newMethodTemplate}}}
	{\centerline {\includegraphics[width=0.7\textwidth]{StringTest-newMethodTemplate}}}
\caption{The new method template in class \ct{StringTest}.
\label{fig:newMethodTemplate}}
\end{figure}

\dothis{Open a browser on the class \ct{StringTest}, and select an appropriate protocol for our method, in this case \menu{tests - converting}, as shown in \figref{newMethodTemplate}.
The highlighted text in the bottom pane is a template that reminds you of what a \st method looks like.
Delete this and enter the code from \mthref{stringtesttestshout}.}
Once you have typed the text into the browser, notice that the bottom pane is outlined in red.
This is a reminder that the pane contains unsaved changes.
So select \menu{accept (s)} from the yellow-button menu in the bottom pane, or just type \short{s}, to compile and save your method.
\index{keyboard shortcuts}
\index{keyboard shortcut!accept}
\seeindex{accept it}{keyboard shortcut, accept}

Because there is as yet no method called \ct{shout}, the browser will ask you to confirm that this is the name that you really want\,---\,and it will suggest some other names that you might have intended (\figref{testShoutConfirm}).
This can be quite useful if you have merely made a typing mistake, but in this case, we really \emph{do} mean \ct{shout}, since that is the method we are about to create, so we have to confirm this by selecting the first option from the menu of choices, as shown in \figref{testShoutConfirm}.

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/testShoutConfirm.png' frame: #morphs building: [:helper |
	| browser textField |
	ToolSet browseClass: StringTest category: #'tests - converting'.
	browser := helper foregroundWindow.
	textField := helper codePaneOfBrowser: browser.
	helper click: textField.
	helper keyStroke: textField key: $a modifiers: #(cmd).
	helper
		runModal: [helper forgetSymbol: #shout during: [
			helper
				type: 'testShout\\	self assert: ''DON''''T PANIC!'' equals: ''Don''''t panic'' shout' withCRs into: textField;
				keyStroke: textField key: $s modifiers: #(cmd)]]
		then: [helper dialogWindow position: (browser pointAtFraction: 0.58 @ 0.2)].
]
\end{ExecuteSmalltalkScript}

\begin{figure}[hbt]
\ifluluelse
	{\centerline {\includegraphics[width=\textwidth]{testShoutConfirm}}}
	{\centerline {\includegraphics[scale=0.7]{testShoutConfirm}}}
\caption{Accepting the testShout method class \ct{StringTest}.
\label{fig:testShoutConfirm}}
\end{figure}

\dothis{Run your newly created test: open the \ind{SUnit} \emphind{TestRunner}, either by dragging it from the \toolsflapind, or by selecting \menu{World~\go{} open...~\go{} Test Runner}.}

The leftmost two panes are a bit like the top panes in the system browser.
The left pane contains a list of system categories, but it's restricted to those categories that contain test classes.

\dothis{Select \scat{CollectionsTests-Text} and the pane to the right will show all of the test classes in that category, which includes the class \ct{StringTest}.
The names of the classes are already selected, so click \menu{Run Selected} to run all these tests.}

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/testRunnerOnStringTest.png' frame: #morphs building: [:helper |
	| testRunner categoryIndex |
	thisContext wrap: [:block |
		helper
		restoreMethods:
			{StringTest >> #testShout.
			StringTest >> #testPercentEncodingJa}
		after: block].
	StringTest compile: 'testShout self assert: false'.
	StringTest removeSelector: #testPercentEncodingJa. "very slow"

	testRunner := (ToolBuilder open: TestRunner new) model.
	categoryIndex := testRunner categoryList indexOf: 'CollectionsTests-Text'.
	testRunner
		categorySelected: categoryIndex;
		categoryAt: categoryIndex put: true;
		selectNoClasses;
		classAt: (testRunner classList findFirst: [:s | s beginsWith: 'StringTest']) put: true;
		runAll.
	helper hideProgressMorph
]
\end{ExecuteSmalltalkScript}

\begin{figure}[hbt]
\ifluluelse
	{\centerline {\includegraphics[width=\textwidth]{testRunnerOnStringTest}}}
	{\centerline {\includegraphics[scale=0.5]{testRunnerOnStringTest}}}
\caption{Running the String tests.
\label{fig:testRunnerTestShout}}
\end{figure}

You should see a message like that shown in \figref{testRunnerTestShout}, which indicates that there was an error in running the tests.
The list of tests that gave rise to errors is shown in the bottom right pane; as you can see, \ct{StringTest>>>#testShout} is the culprit.
(Note that \ct{StringTest>>#testShout} is the Smalltalk way of identifying the \mthind{StringTest}{testShout} method of the \ct{StringTest} class.)
If you click on that line of text, the erroneous test will run again, this time in such a way that you see the error happen: ``\ct{MessageNotUnderstood: ByteString>>>shout}''.
\seeindex{\ct{>>}}{Behavior, \ct{>>}}
\cmindex{Behavior}{>>}

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/Predebugger.png' frame: #morphs building: [:helper |
		helper restoreMethods: ((String lookupSelector: #shout) ifNotNil: [{String>>#shout}] ifNil: [#()]) after: [
			String removeSelector: #shout.
			helper runModal: [StringTest new testShout].
		]
]
\end{ExecuteSmalltalkScript}.
\begin{figure}[hbt]
	\ifluluelse
		{\centerline {\includegraphics[width=0.75\textwidth]{Predebugger}}}
		{\centerline {\includegraphics[scale=0.7]{Predebugger}}}
	\caption{The (pre-)debugger.}
	\label{fig:predebugger}
\end{figure}

The window that opens with the error message is the \st debugger (see \figref{predebugger}).
We will look at the \ind{debugger} and how to use it in \charef{env}.

The error is, of course, exactly what we expected:
Running the test generates an error because we haven't yet written a method that tells strings how to \ct{shout}.
Nevertheless, it's good practice to make sure that the test fails because this confirms that we have set up the testing machinery correctly and that the new test is actually being run.
Once you have seen the error, you can \button{Abandon} the running test, which will close the debugger window.
Note that often with Smalltalk you can define the missing method using the \button{Create} button, edit the newly-created method in the debugger, and then \button{Proceed} with the test.
Now let's define the method that will make the test succeed!

\dothis{Select class \clsind{String} in the system browser, select the \menu{converting} category, type the text in \mthref{shout} over the method creation template, and \menu{accept} it.}
\begin{method}[shout]{The shout method.}
shout

    ^ self asUppercase , 'BANG'
\end{method}

The comma is the string concatenation operation, so the body of this method appends an exclamation mark to an upper-case version of whatever \ct{String} object the \ct{shout} message was sent to.
The \ct{^} tells \sq that the expression that follows is the answer to be returned from the method, in this case, the new concatenated string.
\cmindex{String}{,}

Does this method work?
Let's run the tests and see.

\dothis{Click on \menu{Run Selected} again in the test runner, and this time you should see a green bar and text indicating that all of the tests ran with no failures and no errors.}
When you get to a green bar\footnotemark, it's a good idea to save your work and take a break.
So do that right now!
\footnotetext{Actually, you might not get a green bar since some images contain tests for bugs that still need to be fixed.
Don't worry about this.
\Squeak is constantly evolving.}

\begin{ExecuteSmalltalkScript}
SBEScreenshotRecorder writeTo: './figures/String-Shout.png' frame: #morphs building: [:helper |
	helper restoreMethods: {String >> #shout} after: [
		String organization classify: #shout under: 'converting' logged: true.
		ToolSet browse: String selector: #shout.
		helper takeScreenshot]
]
\end{ExecuteSmalltalkScript}
\begin{figure}[hbt]
\ifluluelse
	{\centerline{\includegraphics[width=\textwidth]{String-Shout}}}
	{\centerline{\includegraphics[scale=0.7]{String-Shout}}}
\caption{The \ct{shout} method defined on class \ct{String}.
\label{fig:String-shout}}
\end{figure}

%=================================================================
\section{Chapter summary}
This chapter has introduced you to the \sq environment and shown you how to use some of the major tools, such as the system browser, the method finder, and the test runner.
You have also seen a little of \sq's syntax, even though you may not understand it all yet.

\begin{itemize}
  \item A running \sq system consists of a \emph{virtual machine}, a \emph{sources} file, and \emph{image} and \emph{changes} files.
  Only these last two change, as they record a snapshot of the running system.
  \item When you start a \sq image, you will find yourself in exactly the same state\,---\,with the same running objects\,---\,that you had when you last saved that image.
  \item \sq is designed to work with a three-button mouse.
  The buttons are known as the \emph{red}, the \emph{yellow} and the \emph{blue} buttons. If you don't have a three-button mouse, you can use modifier keys to obtain the same effect.
  \item You use the \ind{red button} on the \sq background to bring up the \emph{World menu} and launch various tools.
  You can also launch tools from the \toolsflapind at the right of the \sq screen.
  \item A \emph{workspace} is a tool for writing and evaluating snippets of code.
  You can also use it to store arbitrary text.
  \item You can use \ind{keyboard shortcuts} on text in the workspace, or any other tool, to evaluate code.
  The most important of these are \menu{do it} (\short{d}), \menu{print it} (\short{p}), \menu{inspect it} (\short{i}), \menu{explore it} (\short{I}) and \menu{browse it} (\short{b}).
  \item The \emph{system browser} is the main tool for browsing \sq code, and for developing new code.
  \item The \emph{test runner} is a tool for running unit tests.
  It also supports Test Driven Development (TDD).
\end{itemize}

%=================================================================
\ifx\wholebook\relax\else
   \bibliographystyle{jurabib}
   \nobibliography{scg}
   \end{document}
\fi
%=================================================================

%%% Local Variables:
%%% coding: utf-8
%%% mode: latex
%%% TeX-master: t
%%% TeX-PDF-mode: t
%%% ispell-local-dictionary: "english"
%%% End:
